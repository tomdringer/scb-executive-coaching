<% button_bg_class = button_class_for_background(reviews.background_colour) %>
<% button_text_class = button_class_for_text(button_bg_class) %>

<% if @reviews.blank? %>
  <%= link_to 'Create Review', new_review_path %>
<% else %>

<section id="reviews" class="bg-<%= reviews.background_colour %>">
  <div class="container mx-auto p-3">
    <div class="flex flex-col items-center justify-center py-16 text-scb-white">
      <% unless reviews.hide_title %>
        <h2 class="text-<%= reviews.title_colour %> <%= reviews.title_size %> font-bold mb-5 font-poppins font-bold tracking-normal">Customer Reviews</h2>
      <% end %>


      <div data-controller="carousel" style="height:260px; width: 100%; overflow:hidden" class="container w-25 my-5 flex justify-between align-center">

        <button data-action="click->carousel#previousSlide">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>
        </button>
        
        <%= @reviews.each do |review| %>
          <div class="slide absolute w-2/3  inset-x-0 my-auto mx-auto bg-scb-blue"  data-carousel-target="slide">
            <div class="h-64 grid place-items-center">
              <p class="mb-5 mx-auto text-center">"<%= reviews.body %>"</p>
              <p class="mb-5"><%= reviews.author %></p>
            </div>
            <%= link_to 'Edit', 
             edit_review_path(reviews.id), 
             class: "#{button_bg_class} #{button_text_class} rounded-lg p-3", 
             data: { turbo_frame: 'reviews' } %>
          </div>
        <% end %>

        <button data-action="click->carousel#nextSlide">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
        </svg>
        </button>
      </div>
    </div>

  </div>
  <% end %>
  </div>
</section>